-- ç„ä¸›è…³æœ¬ - å®Œæ•´å„ªåŒ–ç‰ˆ v6.4
print("ğŸ® =================================")
print("ğŸ® ç„ä¸›è…³æœ¬ - å®Œæ•´å„ªåŒ–ç‰ˆ v6.4")
print("ğŸ® ç§¦å§‹çš‡åˆ›ä½œ")
print("ğŸ® =================================")

-- æª¢æ¸¬è¨­å‚™é¡å‹
local inputService = game:GetService("UserInputService")
local isMobile = inputService.TouchEnabled
local isDesktop = inputService.MouseEnabled
local deviceType = isMobile and "ğŸ“± æ‰‹æ©Ÿ" or "ğŸ–¥ï¸ é›»è…¦"
print("âœ… æª¢æ¸¬åˆ°è¨­å‚™: " .. deviceType)

-- ç¢ºä¿éŠæˆ²å®Œå…¨åŠ è¼‰
repeat task.wait() until game:IsLoaded()
print("âœ… éŠæˆ²å·²åŠ è¼‰")

-- ç²å–ç©å®¶
local player = game.Players.LocalPlayer
if not player then
    warn("âŒ ç„¡æ³•ç²å–ç©å®¶")
    return
end
print("âœ… ç©å®¶: " .. player.Name)

-- ç­‰å¾…PlayerGui
local playerGui = player:WaitForChild("PlayerGui", 10)
if not playerGui then
    warn("âŒ ç„¡æ³•æ‰¾åˆ°PlayerGuiï¼Œå˜—è©¦ä½¿ç”¨CoreGui")
    playerGui = game:GetService("CoreGui")
end
print("âœ… UIå®¹å™¨: " .. playerGui.Name)

-- æ¸…ç†èˆŠçš„UI
for _, gui in ipairs(playerGui:GetChildren()) do
    if gui.Name:find("XuanCong") then
        gui:Destroy()
    end
end
print("ğŸ—‘ï¸ æ¸…ç†äº†èˆŠçš„UI")

-- ========================
-- å…¨å±€æœå‹™
-- ========================
local tweenService = game:GetService("TweenService")
local runService = game:GetService("RunService")
local httpService = game:GetService("HttpService")

print("âœ… æœå‹™åŠ è¼‰å®Œæˆ")

-- ========================
-- å‰µå»ºä¸»UI ScreenGui
-- ========================
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "XuanCongScript_Large"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.DisplayOrder = 999
screenGui.IgnoreGuiInset = false

print("âœ… ScreenGuiå‰µå»ºå®Œæˆ")

-- ========================
-- å‰µå»ºå·¦å´å›ºå®šè¨­ç½®æŒ‰éˆ•ï¼ˆè¶…å¤§ç‰ˆï¼‰
-- ========================
print("âš™ï¸ å‰µå»ºå·¦å´è¨­ç½®æŒ‰éˆ•...")

local sidebarButton = Instance.new("TextButton")
sidebarButton.Name = "SidebarButton"
sidebarButton.Size = UDim2.new(0, 70, 0, 70)  -- å¤§å¹…æ“´å¤§
sidebarButton.Position = UDim2.new(0, 20, 0, 20)
sidebarButton.BackgroundColor3 = Color3.fromRGB(40, 60, 90)
sidebarButton.BackgroundTransparency = 0.1
sidebarButton.BorderSizePixel = 0
sidebarButton.Text = "âš™ï¸"
sidebarButton.TextColor3 = Color3.fromRGB(200, 230, 255)
sidebarButton.Font = Enum.Font.GothamBold
sidebarButton.TextSize = 28  -- å­—é«”å¤§å¹…åŠ å¤§
sidebarButton.AutoButtonColor = true
sidebarButton.ZIndex = 1000
sidebarButton.Parent = screenGui

-- åœ“è§’
local sidebarCorner = Instance.new("UICorner")
sidebarCorner.CornerRadius = UDim.new(0, 16)  -- åœ“è§’å¢å¤§
sidebarCorner.Parent = sidebarButton

-- é‚Šæ¡†
local sidebarStroke = Instance.new("UIStroke")
sidebarStroke.Color = Color3.fromRGB(100, 150, 200)
sidebarStroke.Thickness = 3  -- é‚Šæ¡†åŠ ç²—
sidebarStroke.Parent = sidebarButton

-- æ·»åŠ é™°å½±æ•ˆæœ
local shadow = Instance.new("ImageLabel")
shadow.Name = "Shadow"
shadow.Size = UDim2.new(1, 16, 1, 16)
shadow.Position = UDim2.new(0, -8, 0, -8)
shadow.BackgroundTransparency = 1
shadow.Image = "rbxassetid://1316045217"
shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
shadow.ImageTransparency = 0.5
shadow.ScaleType = Enum.ScaleType.Slice
shadow.SliceCenter = Rect.new(10, 10, 118, 118)
shadow.ZIndex = 999
shadow.Parent = sidebarButton

-- æ‡¸åœæç¤º
local buttonHint = Instance.new("TextLabel")
buttonHint.Name = "ButtonHint"
buttonHint.Size = UDim2.new(0, 150, 0, 40)  -- æ“´å¤§æç¤ºæ¡†
buttonHint.Position = UDim2.new(0, 80, 0, 15)
buttonHint.BackgroundColor3 = Color3.fromRGB(30, 40, 60)
buttonHint.BackgroundTransparency = 0.2
buttonHint.Text = "é–‹å•Ÿç„ä¸›è…³æœ¬"
buttonHint.TextColor3 = Color3.fromRGB(200, 230, 255)
buttonHint.Font = Enum.Font.Gotham
buttonHint.TextSize = 16  -- å­—é«”åŠ å¤§
buttonHint.TextXAlignment = Enum.TextXAlignment.Center
buttonHint.Visible = false
buttonHint.ZIndex = 999
buttonHint.Parent = screenGui

local hintCorner = Instance.new("UICorner")
hintCorner.CornerRadius = UDim.new(0, 10)
hintCorner.Parent = buttonHint

-- æ‡¸åœæ•ˆæœ
sidebarButton.MouseEnter:Connect(function()
    buttonHint.Visible = true
    sidebarStroke.Color = Color3.fromRGB(150, 200, 255)
    sidebarButton.BackgroundColor3 = Color3.fromRGB(50, 70, 100)
end)

sidebarButton.MouseLeave:Connect(function()
    buttonHint.Visible = false
    sidebarStroke.Color = Color3.fromRGB(100, 150, 200)
    sidebarButton.BackgroundColor3 = Color3.fromRGB(40, 60, 90)
end)

print("âœ… å·¦å´è¨­ç½®æŒ‰éˆ•å‰µå»ºå®Œæˆ")

-- ========================
-- å‰µå»ºä¸»æ¡†æ¶ï¼ˆè¶…å¤§ç‰ˆï¼‰
-- ========================
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 350, 0, 320)  -- å¤§å¹…æ“´å¤§ï¼š350Ã—320
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -160)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 35, 50)
mainFrame.BackgroundTransparency = 0.1
mainFrame.BorderSizePixel = 0
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Parent = screenGui

-- åœ“è§’
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 14)  -- åœ“è§’å¢å¤§
uiCorner.Parent = mainFrame

-- é‚Šæ¡†
local uiStroke = Instance.new("UIStroke")
uiStroke.Color = Color3.fromRGB(100, 150, 200)
uiStroke.Thickness = 3  -- é‚Šæ¡†åŠ ç²—
uiStroke.Parent = mainFrame

print("âœ… ä¸»æ¡†æ¶å‰µå»ºå®Œæˆ")

-- ========================
-- ä¿®å¾©çš„æ‹–å‹•ç³»çµ±ï¼ˆé©æ‡‰å¤§UIï¼‰
-- ========================
print("ğŸ”„ è¨­ç½®æ‹–å‹•ç³»çµ±...")

-- å‰µå»ºæ‹–å‹•æ¨™é¡Œæ¬„
local dragButton = Instance.new("TextButton")
dragButton.Name = "DragButton"
dragButton.Size = UDim2.new(1, 0, 0, 50)  -- é«˜åº¦å¢åŠ 
dragButton.Position = UDim2.new(0, 0, 0, 0)
dragButton.BackgroundColor3 = Color3.fromRGB(40, 60, 90)
dragButton.BackgroundTransparency = 0.2
dragButton.BorderSizePixel = 0
dragButton.Text = "â„ï¸ ç„ä¸›è…³æœ¬ v6.4 (è¶…å¤§ç‰ˆ) æ‹–å‹•æˆ‘"
dragButton.TextColor3 = Color3.fromRGB(200, 230, 255)
dragButton.Font = Enum.Font.GothamBold
dragButton.TextSize = 18  -- å­—é«”åŠ å¤§
dragButton.AutoButtonColor = false
dragButton.Parent = mainFrame

local dragCorner = Instance.new("UICorner")
dragCorner.CornerRadius = UDim.new(0, 14, 0, 0)
dragCorner.Parent = dragButton

-- é—œé–‰æŒ‰éˆ•ï¼ˆè¶…å¤§ç‰ˆï¼‰
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 40, 0, 40)  -- å¤§å¹…åŠ å¤§
closeButton.Position = UDim2.new(1, -45, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(220, 100, 100)
closeButton.BackgroundTransparency = 0.2
closeButton.BorderSizePixel = 0
closeButton.Text = "âŒï¸"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 24  -- å­—é«”å¤§å¹…åŠ å¤§
closeButton.AutoButtonColor = true
closeButton.ZIndex = 2
closeButton.Parent = dragButton

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 10)
closeCorner.Parent = closeButton

-- é—œé–‰æŒ‰éˆ•æ‡¸åœæ•ˆæœ
closeButton.MouseEnter:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
end)

closeButton.MouseLeave:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(220, 100, 100)
end)

-- ä¿®å¾©çš„æ‹–å‹•è®Šé‡
local isDragging = false
local dragStartPosition = Vector2.new(0, 0)
local frameStartPosition = UDim2.new(0, 0, 0, 0)

-- ä¿®å¾©çš„é›»è…¦æ‹–å‹•ï¼ˆä½¿ç”¨æ­£ç¢ºçš„åƒæ•¸ï¼‰
dragButton.MouseButton1Down:Connect(function()
    isDragging = true
    dragStartPosition = inputService:GetMouseLocation()
    frameStartPosition = mainFrame.Position
    dragButton.BackgroundColor3 = Color3.fromRGB(60, 90, 140)
    print("ğŸ–±ï¸ é–‹å§‹æ‹–å‹•")
end)

-- ä½¿ç”¨ RenderStepped ä¾†å¹³æ»‘æ‹–å‹•
runService.RenderStepped:Connect(function()
    if isDragging then
        local currentMouse = inputService:GetMouseLocation()
        local delta = currentMouse - dragStartPosition
        
        mainFrame.Position = UDim2.new(
            frameStartPosition.X.Scale,
            frameStartPosition.X.Offset + delta.X,
            frameStartPosition.Y.Scale,
            frameStartPosition.Y.Offset + delta.Y
        )
    end
end)

inputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        if isDragging then
            isDragging = false
            dragButton.BackgroundColor3 = Color3.fromRGB(40, 60, 90)
            print("ğŸ–±ï¸ åœæ­¢æ‹–å‹•")
        end
    end
end)

-- æ‰‹æ©Ÿæ‹–å‹•
if isMobile then
    print("ğŸ“± è¨­ç½®æ‰‹æ©Ÿæ‹–å‹•ç³»çµ±...")
    
    local touchArea = Instance.new("TextButton")
    touchArea.Name = "TouchArea"
    touchArea.Size = UDim2.new(1, 40, 1, 40)  -- åŠ å¤§è§¸æ§å€åŸŸ
    touchArea.Position = UDim2.new(0, -20, 0, -20)
    touchArea.BackgroundTransparency = 1
    touchArea.Text = ""
    touchArea.ZIndex = -1
    touchArea.Parent = dragButton
    
    local touchStartPosition = Vector2.new(0, 0)
    local touchFrameStart = UDim2.new(0, 0, 0, 0)
    local touchDragging = false
    
    -- è§¸æ§é–‹å§‹
    touchArea.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            touchDragging = true
            touchStartPosition = input.Position
            touchFrameStart = mainFrame.Position
            dragButton.BackgroundColor3 = Color3.fromRGB(60, 90, 140)
        end
    end)
    
    -- è§¸æ§ç§»å‹•
    inputService.InputChanged:Connect(function(input)
        if touchDragging and input.UserInputType == Enum.UserInputType.Touch then
            local currentTouch = input.Position
            local delta = currentTouch - touchStartPosition
            
            mainFrame.Position = UDim2.new(
                touchFrameStart.X.Scale,
                touchFrameStart.X.Offset + delta.X,
                touchFrameStart.Y.Scale,
                touchFrameStart.Y.Offset + delta.Y
            )
        end
    end)
    
    -- è§¸æ§çµæŸ
    inputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            if touchDragging then
                touchDragging = false
                dragButton.BackgroundColor3 = Color3.fromRGB(40, 60, 90)
            end
        end
    end)
end

print("âœ… æ‹–å‹•ç³»çµ±å·²è¨­ç½®")

-- ========================
-- å‰µå»ºè¶…å¤§åŠŸèƒ½æŒ‰éˆ•
-- ========================
local function createButton(text, icon, xPos, yPos, color)
    local button = Instance.new("TextButton")
    button.Name = text
    button.Size = UDim2.new(0.48, 0, 0, 50)  -- æŒ‰éˆ•é«˜åº¦å¤§å¹…å¢åŠ 
    button.Position = UDim2.new(xPos, 15, 0, yPos)  -- é‚Šè·å¢åŠ 
    button.BackgroundColor3 = color
    button.BackgroundTransparency = 0.3
    button.BorderSizePixel = 0
    button.Text = icon .. " " .. text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.Gotham
    button.TextSize = 16  -- å­—é«”åŠ å¤§
    button.AutoButtonColor = true
    button.Active = true
    button.Parent = mainFrame
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)  -- åœ“è§’å¢å¤§
    corner.Parent = button
    
    return button
end

-- å‰µå»ºæŒ‰éˆ•ï¼ˆå…©å…©ä¸€çµ„ï¼Œä¸¦æ’é¡¯ç¤ºï¼‰
-- ç¬¬ä¸€è¡Œï¼šå¿«é€Ÿæ”»æ“Š (å·¦) å’Œ XA (å³)
local fastAttackBtn = createButton("å¿«é€Ÿæ”»æ“Š", "âš¡", 0, 60, Color3.fromRGB(0, 150, 220))
local xaBtn = createButton("XA", "ğŸŒŸ", 0.52, 60, Color3.fromRGB(220, 120, 50))

-- ç¬¬äºŒè¡Œï¼šçš®è…³æœ¬ (å·¦) å’Œ é£›è¡Œ (å³)
local piScriptBtn = createButton("çš®è…³æœ¬", "ğŸ…¿ï¸", 0, 115, Color3.fromRGB(220, 150, 50))
local flightBtn = createButton("é£›è¡Œ", "âœˆï¸", 0.52, 115, Color3.fromRGB(100, 200, 100))

-- ç¬¬ä¸‰è¡Œï¼šFPSå„ªåŒ– (å·¦) å’Œ ç©ºä½ (å³)
local fpsBoostBtn = createButton("FPSå„ªåŒ–", "ğŸ–¥ï¸", 0, 170, Color3.fromRGB(180, 100, 220))

-- å¯ä»¥å†æ·»åŠ ä¸€å€‹æŒ‰éˆ•åœ¨å³å´ï¼ˆå¦‚æœéœ€è¦ï¼‰
-- local extraBtn = createButton("é¡å¤–", "âœ¨", 0.52, 170, Color3.fromRGB(150, 100, 220))

print("âœ… è¶…å¤§åŠŸèƒ½æŒ‰éˆ•å‰µå»ºå®Œæˆ")

-- ========================
-- æ·»åŠ ä½œè€…ä¿¡æ¯ï¼ˆä½ç½®èª¿æ•´ï¼‰
-- ========================
local authorLabel = Instance.new("TextLabel")
authorLabel.Name = "AuthorLabel"
authorLabel.Size = UDim2.new(1, -30, 0, 25)  -- é«˜åº¦å¢åŠ 
authorLabel.Position = UDim2.new(0, 15, 0, 230)
authorLabel.BackgroundTransparency = 1
authorLabel.Text = "ğŸ‘‘ ç§¦å§‹çš‡åˆ›ä½œ"
authorLabel.TextColor3 = Color3.fromRGB(180, 180, 220)
authorLabel.Font = Enum.Font.Gotham
authorLabel.TextSize = 14  -- å­—é«”åŠ å¤§
authorLabel.TextXAlignment = Enum.TextXAlignment.Center
authorLabel.Parent = mainFrame

local versionLabel = Instance.new("TextLabel")
versionLabel.Name = "VersionLabel"
versionLabel.Size = UDim2.new(1, -30, 0, 20)  -- é«˜åº¦å¢åŠ 
versionLabel.Position = UDim2.new(0, 15, 0, 260)
versionLabel.BackgroundTransparency = 1
versionLabel.Text = "â„ï¸ ç„ä¸›è…³æœ¬ v6.4 (è¶…å¤§ç‰ˆ)"
versionLabel.TextColor3 = Color3.fromRGB(150, 200, 255)
versionLabel.Font = Enum.Font.Gotham
versionLabel.TextSize = 12  -- å­—é«”åŠ å¤§
versionLabel.TextXAlignment = Enum.TextXAlignment.Center
versionLabel.Parent = mainFrame

-- ========================
-- å³ä¸‹è§’é€šçŸ¥ç³»çµ±ï¼ˆè¶…å¤§ç‰ˆï¼‰
-- ========================
local function showNotification(message, color, duration)
    duration = duration or 2.5
    
    local notifyFrame = Instance.new("Frame")
    notifyFrame.Name = "Notify_" .. tick()
    notifyFrame.Size = UDim2.new(0, 280, 0, 80)  -- åŠ å¤§é€šçŸ¥æ¡†
    notifyFrame.Position = UDim2.new(1, 290, 1, -90)
    notifyFrame.AnchorPoint = Vector2.new(1, 1)
    notifyFrame.BackgroundColor3 = color or Color3.fromRGB(40, 60, 90)
    notifyFrame.BackgroundTransparency = 0.2
    notifyFrame.BorderSizePixel = 0
    notifyFrame.ZIndex = 10000
    notifyFrame.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)  -- åœ“è§’å¢å¤§
    corner.Parent = notifyFrame
    
    local stroke = Instance.new("UIStroke")
    stroke.Color = Color3.fromRGB(150, 200, 255)
    stroke.Thickness = 2
    stroke.Transparency = 0.3
    stroke.Parent = notifyFrame
    
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, -25, 1, -25)
    textLabel.Position = UDim2.new(0, 12, 0, 12)
    textLabel.BackgroundTransparency = 1
    textLabel.Text = message
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.Font = Enum.Font.Gotham
    textLabel.TextSize = 14  -- å­—é«”åŠ å¤§
    textLabel.TextWrapped = true
    textLabel.Parent = notifyFrame
    
    print("ğŸ“¢ é€šçŸ¥: " .. message)
    
    local slideIn = tweenService:Create(notifyFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Position = UDim2.new(1, -25, 1, -90)
    })
    slideIn:Play()
    
    task.spawn(function()
        task.wait(duration)
        
        if notifyFrame and notifyFrame.Parent then
            local slideOut = tweenService:Create(notifyFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
                Position = UDim2.new(1, 290, 1, -90)
            })
            slideOut:Play()
            
            slideOut.Completed:Wait()
            notifyFrame:Destroy()
        end
    end)
    
    return notifyFrame
end

-- ========================
-- å¿«é€Ÿæ”»æ“Šç³»çµ±
-- ========================
print("âš¡ åˆå§‹åŒ–å¿«é€Ÿæ”»æ“Šç³»çµ±...")

local isFastAttackOn = false
local fastAttackModule = nil

_G.FastAttack = true

local function setupFastAttack()
    if _G.FastAttack then
        local _ENV = (getgenv or getrenv or getfenv)()

        local function SafeWaitForChild(parent, childName)
            local success, result = pcall(function()
                return parent:WaitForChild(childName)
            end)
            if not success or not result then
                warn("noooooo: " .. childName)
            end
            return result
        end

        local function WaitChilds(path, ...)
            local last = path
            for _, child in {...} do
                last = last:FindFirstChild(child) or SafeWaitForChild(last, child)
                if not last then break end
            end
            return last
        end

        local VirtualInputManager = game:GetService("VirtualInputManager")
        local CollectionService = game:GetService("CollectionService")
        local ReplicatedStorage = game:GetService("ReplicatedStorage")
        local TeleportService = game:GetService("TeleportService")
        local RunService = game:GetService("RunService")
        local Players = game:GetService("Players")
        local Player = Players.LocalPlayer

        if not Player then
            warn("æ‰¾ä¸åˆ°æœ¬åœ°ç©å®¶ã€‚")
            return nil
        end

        local Remotes = SafeWaitForChild(ReplicatedStorage, "Remotes")
        if not Remotes then return nil end

        local Validator = SafeWaitForChild(Remotes, "Validator")
        local CommF = SafeWaitForChild(Remotes, "CommF_")
        local CommE = SafeWaitForChild(Remotes, "CommE")

        local ChestModels = SafeWaitForChild(workspace, "ChestModels")
        local WorldOrigin = SafeWaitForChild(workspace, "_WorldOrigin")
        local Characters = SafeWaitForChild(workspace, "Characters")
        local Enemies = SafeWaitForChild(workspace, "Enemies")
        local Map = SafeWaitForChild(workspace, "Map")

        local EnemySpawns = SafeWaitForChild(WorldOrigin, "EnemySpawns")
        local Locations = SafeWaitForChild(WorldOrigin, "Locations")

        local RenderStepped = RunService.RenderStepped
        local Heartbeat = RunService.Heartbeat
        local Stepped = RunService.Stepped

        local Modules = SafeWaitForChild(ReplicatedStorage, "Modules")
        local Net = SafeWaitForChild(Modules, "Net")

        local sethiddenproperty = sethiddenproperty or function(...) return ... end
        local setupvalue = setupvalue or (debug and debug.setupvalue)
        local getupvalue = getupvalue or (debug and debug.getupvalue)

        local Settings = {
            AutoClick = true,
            ClickDelay = 0.0000000000000000000001
        }

        local Module = {}

        Module.FastAttack = (function()
            if _ENV.rz_FastAttack then
                return _ENV.rz_FastAttack
            end

            local FastAttack = {
                Distance = 10000,
                attackMobs = true,
                attackPlayers = true,
                Equipped = nil
            }

            local RegisterAttack = SafeWaitForChild(Net, "RE/RegisterAttack")
            local RegisterHit = SafeWaitForChild(Net, "RE/RegisterHit")

            local function IsAlive(character)
                return character and character:FindFirstChild("Humanoid") and character.Humanoid.Health > 0
            end

            local function ProcessEnemies(OthersEnemies, Folder)
                local BasePart = nil
                for _, Enemy in Folder:GetChildren() do
                    local Head = Enemy:FindFirstChild("Head")
                    if Head and IsAlive(Enemy) and Player:DistanceFromCharacter(Head.Position) < FastAttack.Distance then
                        if Enemy ~= Player.Character then
                            table.insert(OthersEnemies, { Enemy, Head })
                            BasePart = Head
                        end
                    end
                end
                return BasePart
            end

            function FastAttack:Attack(BasePart, OthersEnemies)
                if not BasePart or #OthersEnemies == 0 then return end
                RegisterAttack:FireServer(Settings.ClickDelay or 0)
                RegisterHit:FireServer(BasePart, OthersEnemies)
            end

            function FastAttack:AttackNearest()
                local OthersEnemies = {}
                local Part1 = ProcessEnemies(OthersEnemies, Enemies)
                local Part2 = ProcessEnemies(OthersEnemies, Characters)
                if #OthersEnemies > 0 then
                    self:Attack(Part1 or Part2, OthersEnemies)
                else
                    task.wait(0)
                end
            end

            function FastAttack:BladeHits()
                local Equipped = IsAlive(Player.Character) and Player.Character:FindFirstChildOfClass("Tool")
                if Equipped and Equipped.ToolTip ~= "Gun" then
                    self:AttackNearest()
                else
                    task.wait(0)
                end
            end

            local attackLoop = nil
            
            function FastAttack:start()
                print("â–¶ï¸ é–‹å§‹å¿«é€Ÿæ”»æ“Š")
                attackLoop = task.spawn(function()
                    while task.wait(Settings.ClickDelay) do
                        if Settings.AutoClick then
                            self:BladeHits()
                        end
                    end
                end)
            end
            
            function FastAttack:stop()
                print("â¹ï¸ åœæ­¢å¿«é€Ÿæ”»æ“Š")
                if attackLoop then
                    task.cancel(attackLoop)
                    attackLoop = nil
                end
            end

            _ENV.rz_FastAttack = FastAttack
            return FastAttack
        end)()
        
        return Module.FastAttack
    end
    return nil
end

-- åˆå§‹åŒ–å¿«é€Ÿæ”»æ“Šç³»çµ±
local function initFastAttack()
    showNotification("âš¡ æ­£åœ¨åˆå§‹åŒ–å¿«é€Ÿæ”»æ“Š...", Color3.fromRGB(255, 165, 0), 1)
    
    local success, result = pcall(function()
        return setupFastAttack()
    end)
    
    if success and result then
        showNotification("âœ… å¿«é€Ÿæ”»æ“Šåˆå§‹åŒ–å®Œæˆ", Color3.fromRGB(0, 180, 0), 1.5)
        print("âœ… å¿«é€Ÿæ”»æ“Šç³»çµ±å°±ç·’")
        return result
    else
        local errMsg = result or "æœªçŸ¥éŒ¯èª¤"
        showNotification("âš ï¸ å¿«é€Ÿæ”»æ“Šåˆå§‹åŒ–å¤±æ•—\néŒ¯èª¤: " .. tostring(errMsg), Color3.fromRGB(255, 0, 0), 2)
        print("âŒ å¿«é€Ÿæ”»æ“Šåˆå§‹åŒ–å¤±æ•—: " .. errMsg)
        return nil
    end
end

-- ========================
-- çš®è…³æœ¬åŠŸèƒ½
-- ========================
print("ğŸ”„ è¨­ç½®çš®è…³æœ¬åŠŸèƒ½...")

local function executePiScript()
    showNotification("ğŸ…¿ï¸ æ­£åœ¨åŠ è¼‰çš®è…³æœ¬...", Color3.fromRGB(255, 165, 0), 2)
    
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaopi77/xiaopi77/main/QQ1002100032-Roblox-Pi-script.lua"))()
        return true
    end)
    
    if success then
        showNotification("âœ… çš®è…³æœ¬åŠ è¼‰æˆåŠŸï¼", Color3.fromRGB(0, 180, 0), 2)
        print("âœ… çš®è…³æœ¬åŠ è¼‰æˆåŠŸ")
        return true
    else
        local errMsg = err or "æœªçŸ¥éŒ¯èª¤"
        showNotification("âŒ çš®è…³æœ¬åŠ è¼‰å¤±æ•—\néŒ¯èª¤: " .. tostring(errMsg), Color3.fromRGB(255, 0, 0), 3)
        print("âŒ çš®è…³æœ¬éŒ¯èª¤: " .. errMsg)
        return false
    end
end

-- ========================
-- XAæŒ‰éˆ•åŠŸèƒ½
-- ========================
print("ğŸŒŸ è¨­ç½®XAåŠŸèƒ½...")

local xaLoaded = false
local xaRunning = false

local function executeXAScript()
    showNotification("ğŸŒŸ æ­£åœ¨åŠ è¼‰XAè…³æœ¬...", Color3.fromRGB(255, 165, 0), 2)
    
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.gitcode.com/Xingtaiduan/Scripts/raw/main/Loader.lua"))()
        return true
    end)
    
    if success then
        showNotification("âœ… XAè…³æœ¬åŠ è¼‰æˆåŠŸï¼", Color3.fromRGB(0, 180, 0), 2)
        print("âœ… XAè…³æœ¬åŠ è¼‰æˆåŠŸ")
        return true
    else
        local errMsg = err or "æœªçŸ¥éŒ¯èª¤"
        showNotification("âŒ XAè…³æœ¬åŠ è¼‰å¤±æ•—\néŒ¯èª¤: " .. tostring(errMsg), Color3.fromRGB(255, 0, 0), 3)
        print("âŒ XAè…³æœ¬éŒ¯èª¤: " .. tostring(errMsg))
        return false
    end
end

-- ========================
-- é£›è¡ŒåŠŸèƒ½
-- ========================
print("âœˆï¸ è¨­ç½®é£›è¡ŒåŠŸèƒ½...")

local isFlying = false
local flightLoaded = false

local function executeFlightScript()
    showNotification("âœˆï¸ æ­£åœ¨åŠ è¼‰é£›è¡Œæ¨¡çµ„...", Color3.fromRGB(255, 165, 0), 2)
    
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/kexuan001/rjrym/refs/heads/main/fly.lua"))()
        return true
    end)
    
    if success then
        showNotification("âœ… é£›è¡Œæ¨¡çµ„åŠ è¼‰æˆåŠŸï¼", Color3.fromRGB(0, 180, 0), 2)
        print("âœ… é£›è¡Œè…³æœ¬åŠ è¼‰æˆåŠŸ")
        return true
    else
        local errMsg = err or "æœªçŸ¥éŒ¯èª¤"
        showNotification("âŒ é£›è¡Œæ¨¡çµ„åŠ è¼‰å¤±æ•—\néŒ¯èª¤: " .. tostring(errMsg), Color3.fromRGB(255, 0, 0), 3)
        print("âŒ é£›è¡Œè…³æœ¬éŒ¯èª¤: " .. tostring(errMsg))
        return false
    end
end

-- ========================
-- FPS å„ªåŒ–åŠŸèƒ½
-- ========================
print("ğŸ–¥ï¸ è¨­ç½® FPS å„ªåŒ–åŠŸèƒ½...")

local isFPSBoosted = false
local fpsBoostLoaded = false

local function executeFPSBoostScript()
    showNotification("ğŸ–¥ï¸ æ­£åœ¨å„ªåŒ– FPS...", Color3.fromRGB(255, 165, 0), 2)
    
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/kexuan001/rjrym/refs/heads/main/fpsboost"))()
        return true
    end)
    
    if success then
        showNotification("âœ… FPS å„ªåŒ–å·²æ‡‰ç”¨ï¼", Color3.fromRGB(0, 180, 0), 2)
        print("âœ… FPS å„ªåŒ–è…³æœ¬åŠ è¼‰æˆåŠŸ")
        return true
    else
        local errMsg = err or "æœªçŸ¥éŒ¯èª¤"
        showNotification("âŒ FPS å„ªåŒ–å¤±æ•—\néŒ¯èª¤: " .. tostring(errMsg), Color3.fromRGB(255, 0, 0), 3)
        print("âŒ FPS å„ªåŒ–éŒ¯èª¤: " .. tostring(errMsg))
        return false
    end
end

-- ========================
-- UIé¡¯ç¤º/éš±è—åŠŸèƒ½
-- ========================
local isUIVisible = false

-- åˆ‡æ›UIé¡¯ç¤ºç‹€æ…‹
local function toggleUI()
    isUIVisible = not isUIVisible
    
    if isUIVisible then
        -- é¡¯ç¤ºUI
        mainFrame.Visible = true
        sidebarButton.Text = "ğŸ“‚"
        sidebarButton.BackgroundColor3 = Color3.fromRGB(60, 90, 140)
        buttonHint.Text = "é—œé–‰ç„ä¸›è…³æœ¬"
        
        -- å‹•ç•«æ•ˆæœ
        mainFrame.Position = UDim2.new(0.5, -175, 0.5, -160)
        mainFrame.BackgroundTransparency = 1
        
        local fadeIn = tweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
            BackgroundTransparency = 0.1
        })
        fadeIn:Play()
        
        showNotification("ğŸ“± ç„ä¸›è…³æœ¬è¶…å¤§ç‰ˆå·²é–‹å•Ÿ", Color3.fromRGB(50, 150, 200), 1.5)
    else
        -- éš±è—UI
        sidebarButton.Text = "âš™ï¸"
        sidebarButton.BackgroundColor3 = Color3.fromRGB(40, 60, 90)
        buttonHint.Text = "é–‹å•Ÿç„ä¸›è…³æœ¬"
        
        local fadeOut = tweenService:Create(mainFrame, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
            BackgroundTransparency = 1
        })
        fadeOut:Play()
        
        fadeOut.Completed:Wait()
        mainFrame.Visible = false
        
        showNotification("ğŸ“± ç„ä¸›è…³æœ¬å·²éš±è—", Color3.fromRGB(150, 150, 150), 1.5)
    end
end

-- ========================
-- æŒ‰éˆ•äº‹ä»¶ï¼ˆè¶…å¤§ç‰ˆï¼‰
-- ========================
print("ğŸ”§ è¨­ç½®æŒ‰éˆ•äº‹ä»¶...")

-- å´é‚Šæ¬„æŒ‰éˆ•é»æ“Š
sidebarButton.MouseButton1Click:Connect(function()
    toggleUI()
end)

-- å¿«é€Ÿæ”»æ“ŠæŒ‰éˆ•
fastAttackBtn.MouseButton1Click:Connect(function()
    print("ğŸ”˜ å¿«é€Ÿæ”»æ“ŠæŒ‰éˆ•è¢«é»æ“Š")
    
    if not fastAttackModule then
        showNotification("ğŸ”„ æ­£åœ¨åˆå§‹åŒ–å¿«é€Ÿæ”»æ“Šç³»çµ±...", Color3.fromRGB(255, 165, 0), 1)
        fastAttackModule = initFastAttack()
        if not fastAttackModule then
            showNotification("âŒ å¿«é€Ÿæ”»æ“Šåˆå§‹åŒ–å¤±æ•—", Color3.fromRGB(255, 0, 0), 1.5)
            return
        end
    end
    
    isFastAttackOn = not isFastAttackOn
    
    if isFastAttackOn then
        -- é–‹å•Ÿå¿«é€Ÿæ”»æ“Š
        fastAttackBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
        fastAttackBtn.Text = "âš¡ å¿«é€Ÿæ”»æ“Š [ON]"
        showNotification("âš¡ å¿«é€Ÿæ”»æ“Šå·²é–‹å•Ÿ\næ­£åœ¨è‡ªå‹•æ”»æ“Šæ•µäºº...", Color3.fromRGB(0, 180, 0), 2)
        
        -- å•Ÿå‹•å¿«é€Ÿæ”»æ“Šå¾ªç’°
        if fastAttackModule and fastAttackModule.start then
            fastAttackModule:start()
        end
    else
        -- é—œé–‰å¿«é€Ÿæ”»æ“Š
        fastAttackBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 220)
        fastAttackBtn.Text = "âš¡ å¿«é€Ÿæ”»æ“Š [OFF]"
        showNotification("ğŸ›‘ å¿«é€Ÿæ”»æ“Šå·²é—œé–‰", Color3.fromRGB(200, 0, 0), 1.5)
        
        -- åœæ­¢å¿«é€Ÿæ”»æ“Šå¾ªç’°
        if fastAttackModule and fastAttackModule.stop then
            fastAttackModule:stop()
        end
    end
end)

-- XAæŒ‰éˆ•
xaBtn.MouseButton1Click:Connect(function()
    if not xaLoaded then
        -- ç¬¬ä¸€æ¬¡é»æ“Šï¼ŒåŠ è¼‰XAè…³æœ¬
        xaBtn.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
        xaBtn.Text = "ğŸŒŸ åŠ è¼‰ä¸­..."
        
        local success = executeXAScript()
        
        if success then
            xaLoaded = true
            xaRunning = true
            xaBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
            xaBtn.Text = "ğŸŒŸ XA [ON]"
        else
            xaBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
            xaBtn.Text = "ğŸŒŸ åŠ è¼‰å¤±æ•—"
            
            -- é‡ç½®ç‹€æ…‹
            task.wait(1.5)
            xaBtn.BackgroundColor3 = Color3.fromRGB(220, 120, 50)
            xaBtn.Text = "ğŸŒŸ XA"
        end
    else
        -- å·²ç¶“åŠ è¼‰éï¼Œåˆ‡æ›ç‹€æ…‹é¡¯ç¤º
        xaRunning = not xaRunning
        
        if xaRunning then
            xaBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
            xaBtn.Text = "ğŸŒŸ XA [ON]"
            showNotification("âœ… XAåŠŸèƒ½å·²å•Ÿç”¨", Color3.fromRGB(0, 180, 0), 1.5)
        else
            xaBtn.BackgroundColor3 = Color3.fromRGB(220, 120, 50)
            xaBtn.Text = "ğŸŒŸ XA [OFF]"
            showNotification("ğŸŒŸ XAåŠŸèƒ½å·²é—œé–‰", Color3.fromRGB(150, 150, 150), 1.5)
        end
    end
end)

-- çš®è…³æœ¬æŒ‰éˆ•
piScriptBtn.MouseButton1Click:Connect(function()
    piScriptBtn.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
    piScriptBtn.Text = "ğŸ…¿ï¸ åŠ è¼‰ä¸­..."
    
    local success = executePiScript()
    
    if success then
        piScriptBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
        piScriptBtn.Text = "ğŸ…¿ï¸ åŠ è¼‰æˆåŠŸ"
        task.wait(1.5)
        piScriptBtn.BackgroundColor3 = Color3.fromRGB(220, 150, 50)
        piScriptBtn.Text = "ğŸ…¿ï¸ çš®è…³æœ¬"
    else
        piScriptBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
        piScriptBtn.Text = "ğŸ…¿ï¸ åŠ è¼‰å¤±æ•—"
        task.wait(1.5)
        piScriptBtn.BackgroundColor3 = Color3.fromRGB(220, 150, 50)
        piScriptBtn.Text = "ğŸ…¿ï¸ çš®è…³æœ¬"
    end
end)

-- é£›è¡ŒæŒ‰éˆ•
flightBtn.MouseButton1Click:Connect(function()
    if not flightLoaded then
        -- ç¬¬ä¸€æ¬¡é»æ“Šï¼ŒåŠ è¼‰é£›è¡Œè…³æœ¬
        flightBtn.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
        flightBtn.Text = "âœˆï¸ åŠ è¼‰ä¸­..."
        
        local success = executeFlightScript()
        
        if success then
            flightLoaded = true
            isFlying = true
            flightBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
            flightBtn.Text = "âœˆï¸ é£›è¡Œ [ON]"
        else
            flightBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
            flightBtn.Text = "âœˆï¸ åŠ è¼‰å¤±æ•—"
            
            -- é‡ç½®ç‹€æ…‹
            task.wait(1.5)
            flightBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
            flightBtn.Text = "âœˆï¸ é£›è¡Œ"
        end
    else
        -- å·²ç¶“åŠ è¼‰éï¼Œåˆ‡æ›ç‹€æ…‹é¡¯ç¤º
        isFlying = not isFlying
        
        if isFlying then
            flightBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
            flightBtn.Text = "âœˆï¸ é£›è¡Œ [ON]"
            showNotification("âœ… é£›è¡Œæ¨¡å¼å·²é–‹å•Ÿ", Color3.fromRGB(0, 180, 0), 1.5)
        else
            flightBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
            flightBtn.Text = "âœˆï¸ é£›è¡Œ [OFF]"
            showNotification("ğŸ›‘ é£›è¡Œæ¨¡å¼å·²é—œé–‰", Color3.fromRGB(200, 0, 0), 1.5)
        end
    end
end)

-- FPS å„ªåŒ–æŒ‰éˆ•
fpsBoostBtn.MouseButton1Click:Connect(function()
    if not fpsBoostLoaded then
        -- ç¬¬ä¸€æ¬¡é»æ“Šï¼ŒåŠ è¼‰ FPS å„ªåŒ–
        fpsBoostBtn.BackgroundColor3 = Color3.fromRGB(255, 165, 0)
        fpsBoostBtn.Text = "ğŸ–¥ï¸ å„ªåŒ–ä¸­..."
        
        local success = executeFPSBoostScript()
        
        if success then
            fpsBoostLoaded = true
            isFPSBoosted = true
            fpsBoostBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
            fpsBoostBtn.Text = "ğŸ–¥ï¸ FPSå„ªåŒ– [ON]"
        else
            fpsBoostBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
            fpsBoostBtn.Text = "ğŸ–¥ï¸ å„ªåŒ–å¤±æ•—"
            
            -- é‡ç½®ç‹€æ…‹
            task.wait(1.5)
            fpsBoostBtn.BackgroundColor3 = Color3.fromRGB(180, 100, 220)
            fpsBoostBtn.Text = "ğŸ–¥ï¸ FPSå„ªåŒ–"
        end
    else
        -- å·²ç¶“åŠ è¼‰éï¼Œåˆ‡æ›ç‹€æ…‹é¡¯ç¤º
        isFPSBoosted = not isFPSBoosted
        
        if isFPSBoosted then
            fpsBoostBtn.BackgroundColor3 = Color3.fromRGB(60, 220, 60)
            fpsBoostBtn.Text = "ğŸ–¥ï¸ FPSå„ªåŒ– [ON]"
            showNotification("âœ… FPS å„ªåŒ–å·²å•Ÿç”¨", Color3.fromRGB(0, 180, 0), 1.5)
        else
            fpsBoostBtn.BackgroundColor3 = Color3.fromRGB(180, 100, 220)
            fpsBoostBtn.Text = "ğŸ–¥ï¸ FPSå„ªåŒ– [OFF]"
            showNotification("ğŸ–¥ï¸ FPS å„ªåŒ–å·²é—œé–‰", Color3.fromRGB(150, 150, 150), 1.5)
        end
    end
end)

-- é—œé–‰æŒ‰éˆ•
closeButton.MouseButton1Click:Connect(function()
    toggleUI()
end)

-- ESCéµé—œé–‰ä¸»UIï¼ˆåƒ…é›»è…¦ï¼‰
if not isMobile then
    inputService.InputBegan:Connect(function(input, gameProcessed)
        if not gameProcessed and input.KeyCode == Enum.KeyCode.Escape then
            if isUIVisible then
                toggleUI()
            end
        end
    end)
end

-- ========================
-- åˆå§‹åŒ–å®Œæˆ
-- ========================
task.wait(0.5)

-- é¡¯ç¤ºå•Ÿå‹•é€šçŸ¥
showNotification("âœ… ç„ä¸›è…³æœ¬è¶…å¤§ç‰ˆå·²åŠ è¼‰ v6.4\nâš¡ å¿«é€Ÿæ”»æ“Š + ğŸŒŸ XAè…³æœ¬\nğŸ…¿ï¸ çš®è…³æœ¬ + âœˆï¸ é£›è¡Œ\nğŸ–¥ï¸ FPSå„ªåŒ–", Color3.fromRGB(50, 150, 200), 3)

print("ğŸ® =================================")
print("ğŸ® ç„ä¸›è…³æœ¬ - è¶…å¤§ç‰ˆ v6.4")
print("ğŸ® è¨­å‚™: " .. deviceType)
print("ğŸ® UIå°ºå¯¸: 350Ã—320 (è¶…å¤§ç‰ˆ)")
print("ğŸ® æŒ‰éˆ•å°ºå¯¸: 50åƒç´ é«˜åº¦")
print("ğŸ® æŒ‰éˆ•ä½ˆå±€: é›™æ’è¨­è¨ˆ")
print("ğŸ® åŠŸèƒ½åŒ…æ‹¬:")
print("ğŸ®   âš¡ æ–°ç‰ˆå¿«é€Ÿæ”»æ“Šç³»çµ±")
print("ğŸ®   ğŸŒŸ XAè…³æœ¬ (GitCode)")
print("ğŸ®   ğŸ…¿ï¸ çš®è…³æœ¬åŠ è¼‰")
print("ğŸ®   âœˆï¸ é£›è¡ŒåŠŸèƒ½")
print("ğŸ®   ğŸ–¥ï¸ FPSå„ªåŒ–åŠŸèƒ½")
print("ğŸ®   ğŸ¨ è¶…å¤§å¯æ‹–å‹•UIç•Œé¢")
print("ğŸ® =================================")

-- é åŠ è¼‰å¿«é€Ÿæ”»æ“Šç³»çµ±
task.spawn(function()
    task.wait(1)
    print("ğŸ”§ é åŠ è¼‰å¿«é€Ÿæ”»æ“Šç³»çµ±...")
    fastAttackModule = initFastAttack()
    if fastAttackModule then
        print("âœ… å¿«é€Ÿæ”»æ“Šç³»çµ±é åŠ è¼‰å®Œæˆ")
        showNotification("âš¡ å¿«é€Ÿæ”»æ“Šç³»çµ±å°±ç·’\né»æ“ŠæŒ‰éˆ•é–‹å•ŸåŠŸèƒ½", Color3.fromRGB(100, 150, 200), 2)
    end
end)

print("ğŸš€ è…³æœ¬åŠ è¼‰å®Œæˆï¼ç„ä¸›è…³æœ¬ v6.4 è¶…å¤§ç‰ˆå·²å°±ç·’ã€‚")
